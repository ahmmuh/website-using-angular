if (self.CavalryLogger) { CavalryLogger.start_js(["mzvE7"]); }

__d("FocusRelocator.react",["csx","CSS","Focus","React","getActiveElement"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){var c=this.props,d=c.from;c=c.to;var e=a.from;a=a.to;e&&a&&(d!==e||c!==a)&&(this.$1&&this.$1.remove(),this.$1=b("Focus").relocate(e,a))};d.componentDidUpdate=function(){this.$2()};d.componentWillUnmount=function(){this.$1&&this.$1.remove(),this.$1=null};d.render=function(){return this.props.children};d.$3=function(){var a=this.props,c=a.from;a=a.to;c&&a&&(b("Focus").performRelocation(c,a,b("getActiveElement")()===this.props.from),this.$2())};d.$2=function(){var a=this;this.props.to&&b("getActiveElement")()===this.props.from&&!b("CSS").matchesSelector(this.props.to,"._16jm")&&setTimeout(function(){a.$3()},0)};return c}(b("React").Component);e.exports=a}),null);
__d("DigitalContentWalletPromotionEventQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2303481716348022"};b.getQueryID=function(){return"1925034827543956"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("DigitalContentWalletPromotionNuxView.react",["fbt","Bootloader","DigitalContentWalletPromotionEventQueryWebGraphQLQuery","React","SimpleNUXMessageTypes","WebGraphQL","XUIAmbientNUX.react","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="SPEND_MATCH",i="FLYOUT_V2";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showNux:!1,promotionEvent:null},d.$1=function(){b("Bootloader").loadModules(["SimpleNUXMessage"],function(a){a.markMessageSeenByUser(d.props.messageType)},"DigitalContentWalletPromotionNuxView.react"),d.setState({showNux:!1}),d.props.onCloseButtonClick&&d.props.onCloseButtonClick()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this;b("Bootloader").loadModules(["SimpleNUXMessage"],function(b){b=b.hasUserSeenMessage(a.props.messageType);a.setState({showNux:!b})},"DigitalContentWalletPromotionNuxView.react");b("promiseDone")(b("WebGraphQL").exec(new(b("DigitalContentWalletPromotionEventQueryWebGraphQLQuery"))({input:{wallet_type:"FB_STARS",payee_id:this.props.targetID}})),function(b){b=(b=b)!=null?b.digital_content_wallet_promotion_event:b;if(b){var c;a.setState({promotionEvent:{id:((c=b)!=null?c.id:c)||"",type:((c=b)!=null?c.type:c)||"SPEND_MATCH",title:((c=b)!=null?c.title:c)||"",description:((c=b)!=null?c.description:c)||"",imageSrc:((c=b)!=null?c.image:c)||"",isEnabled:((c=b)!=null?c.event_enabled:c)||!1,maxQuantity:((c=b)!=null?c.max_units_per_use:c)||0}})}else a.setState({promotionEvent:null})},function(b){a.setState({promotionEvent:null})})};d.render=function(){var a=this.state.promotionEvent;if(!this.state.showNux||a==null||!a.isEnabled)return null;if(this.props.messageType===b("SimpleNUXMessageTypes").DIGITAL_CONTENT_WALLET_PROMOTION_SPEND_MATCH&&a.type===h)return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,position:"above",shown:!0,alignment:"right",onCloseButtonClick:this.$1},g._("Send Stars and Facebook will match up to {maximum number of stars that Facebook will match.}",[g._param("maximum number of stars that Facebook will match.",a.maxQuantity)]));return this.props.messageType===b("SimpleNUXMessageTypes").DIGITAL_CONTENT_FLEXIBLE_STARS_V2_WWW_NUX&&a.type===i?b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,position:"above",shown:!0,alignment:"right",onCloseButtonClick:this.$1},g._("Click and Try Flyout 2.0, and try yourself on slider!")):null};return c}(b("React").Component);e.exports=a}),null);
__d("DigitalContentWalletPromotionStore.react",["DigitalContentWalletPromotionDispatcher.react","FluxReduceStore","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({showFlexibleStarFlyout:!1,showFlexibleStarToolTip:!1}));a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getInitialState=function(){return new g()};c.reduce=function(a,b){switch(b.type){case"ACCEPT_PROMOTION":return a.set("showFlexibleStarFlyout",!0).set("showFlexibleStarToolTip",!1);case"DISMISS_PROMOTION":return a.set("showFlexibleStarFlyout",!1).set("showFlexibleStarToolTip",!0);default:return a.set("showFlexibleStarFlyout",!1).set("showFlexibleStarToolTip",!1)}};c.shouldShowFlexibleStarFlyout=function(){return this.getState().get("showFlexibleStarFlyout")};c.shouldShowFlexibleStarToolTip=function(){return this.getState().get("showFlexibleStarToolTip")};return b}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("DigitalContentWalletPromotionDispatcher.react"))}),null);
__d("UFIFlexibleStarsButton.react",["cx","fbt","Arbiter","BootloadedComponent.react","Bootloader","DigitalContentWalletPromotionDispatcher.react","DigitalContentWalletPromotionNuxView.react","DigitalContentWalletPromotionStore.react","FluxContainer","FocusRelocator.react","FunnelLogger","JSResource","LayerTabIsolation","Link.react","React","SimpleNUXMessageTypes","SubscriptionsHandler","VideoTipJarTypedLogger","XUIContextualDialog.react","XUISpinner.react","gkx","qex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=320;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={flyoutShown:!1,renderFlyout:null,showNux:!1,showPromotionNux:!1},d.$8=function(a){d.$3=a},d.$14=function(){d.setState({showPromotionNux:!1})},d.$9=function(){d.$1=d.state.flyoutShown},d.$6=function(){d.setState({flyoutShown:!1})},d.$15=function(a){d.props.onStarsSelected(a),d.$6()},d.$13=function(){b("Bootloader").loadModules(["SimpleNUXMessage"],function(a){a.markMessageSeenByUser(b("SimpleNUXMessageTypes").GAMES_FLEXIBLE_STARS_WWW_NUX)},"UFIFlexibleStarsButton.react"),d.setState({showNux:!1})},d.$7=function(){__p&&__p();d.state.showNux&&d.$13();d.state.showPromotionNux&&d.$14();new(b("VideoTipJarTypedLogger"))().setTipJarEvent("flexible_stars_glyph_clicked").setVideoID(d.props.videoID).log();b("FunnelLogger").getFunnelInstance("FLEXIBLE_STARS_WWW_FUNNEL")||b("FunnelLogger").startFunnel("FLEXIBLE_STARS_WWW_FUNNEL");b("FunnelLogger").appendAction("FLEXIBLE_STARS_WWW_FUNNEL","glyph_clicked");if(d.state.renderFlyout!==null){d.$1||d.setState({flyoutShown:!0});return}d.setState(function(a){return{flyoutShown:!0}});var a=b("qex")._("837999")?b("Bootloader").loadModules(["FlexibleStarsFlyoutV2.react"],function(a){d.setState({renderFlyout:function(){return b("React").createElement(a,{hideFlyout:d.$6,targetID:d.props.targetID,videoID:d.props.videoID})}})},"UFIFlexibleStarsButton.react"):b("Bootloader").loadModules(["FlexibleStarsFlyout.react"],function(a){d.setState({renderFlyout:function(){return b("React").createElement(a,{onStarsSelected:d.$15,targetID:d.props.targetID,targetName:d.props.targetName,videoID:d.props.videoID})}})},"UFIFlexibleStarsButton.react");d.$4.addSubscriptions(a)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("DigitalContentWalletPromotionStore.react")]};c.calculateState=function(a){a=babelHelpers["extends"]({},a);a.flyoutShown=b("DigitalContentWalletPromotionStore.react").shouldShowFlexibleStarFlyout();a.showPromotionNux=b("DigitalContentWalletPromotionStore.react").shouldShowFlexibleStarToolTip();return a};var d=c.prototype;d.componentDidMount=function(){var a=this;this.props.canShowNux&&b("gkx")("678289")&&b("Bootloader").loadModules(["SimpleNUXMessage"],function(c){c=c.hasUserSeenMessage(b("SimpleNUXMessageTypes").GAMES_FLEXIBLE_STARS_WWW_NUX);a.setState({showNux:!c})},"UFIFlexibleStarsButton.react");this.$4=new(b("SubscriptionsHandler"))();this.$5=b("Arbiter").subscribe("page_transition",function(){return a.$6()});b("DigitalContentWalletPromotionDispatcher.react").explicitlyRegisterStores([b("DigitalContentWalletPromotionStore.react")])};d.componentWillUnmount=function(){this.$5&&this.$5.unsubscribe(),this.$4&&this.$4.release(),delete this.$4};d.render=function(){var a=this,c=h._("Send stars to {target_name}",[h._param("target_name",this.props.targetName)]);this.state.flyoutShown&&this.$7();return b("React").createElement(b("FocusRelocator.react"),{from:this.$3,to:this.refs.icon},b("React").createElement(b("Link.react"),{"aria-label":c,className:"_r1a _6nky UFICommentSupportButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":c,linkRef:this.$8,onClick:this.$7,onMouseDown:this.$9,role:"button"},b("React").createElement("div",{ref:function(b){return a.$2=b},className:"_6nkz"}),this.$10(),this.$11(),this.$12()))};d.$10=function(){var a=this;return!this.state.showNux||!b("gkx")("678289")?null:b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIFlexibleStarsButton.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return a.$2},shown:!0,position:"above",alignment:"right",onCloseButtonClick:this.$13},h._("New! Keep your Stars until you're ready to send them."))};d.$11=function(){var a=this;if(!this.state.showPromotionNux||this.state.showNux)return null;return b("gkx")("857254")?b("React").createElement(b("DigitalContentWalletPromotionNuxView.react"),{contextRef:function(){return a.$2},messageType:b("SimpleNUXMessageTypes").DIGITAL_CONTENT_FLEXIBLE_STARS_V2_WWW_NUX,onCloseButtonClick:this.$14,targetID:this.props.targetID}):b("React").createElement(b("DigitalContentWalletPromotionNuxView.react"),{contextRef:function(){return a.$2},messageType:b("SimpleNUXMessageTypes").DIGITAL_CONTENT_WALLET_PROMOTION_SPEND_MATCH,onCloseButtonClick:this.$14,targetID:this.props.targetID})};d.$12=function(){var a=this;return b("React").createElement(b("XUIContextualDialog.react"),{alignment:"right",behaviors:{LayerTabIsolation:b("LayerTabIsolation")},className:"_3v1n",contextRef:function(){return a.$3},label:h._("Send Stars"),onBlur:this.$6,onToggle:function(b){!b&&a.state.flyoutShown&&a.$6()},position:"above",shown:this.state.flyoutShown,hasActionableContext:!0,width:i},this.state.renderFlyout==null||!this.state.flyoutShown?b("React").createElement("div",{className:"_xte"},b("React").createElement(b("XUISpinner.react"),{size:"large"})):this.state.renderFlyout())};return c}(b("React").Component);e.exports=b("FluxContainer").create(a)}),null);
__d("UFINativeSupportButton.react",["cx","fbt","Arbiter","BootloadedComponent.react","Bootloader","FocusRelocator.react","JSResource","LayerTabIsolation","Link.react","React","SubscriptionsHandler","VideoTipJarTypedLogger","XUIContextualDialog.react","XUISpinner.react","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=320;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={flyoutShown:!1,renderFlyout:null,showNux:!1},d.$7=function(a){d.$3=a},d.$9=function(){d.$1=d.state.flyoutShown},d.$6=function(){d.setState({flyoutShown:!1})},d.$12=function(){b("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(a,b){a.markMessageSeenByUser(b.GAMES_NATIVE_SUPPORT_GLYPH)},"UFINativeSupportButton.react"),d.setState({showNux:!1})},d.$8=function(){__p&&__p();d.state.showNux&&d.$12();new(b("VideoTipJarTypedLogger"))().setTipJarEvent("native_support_glyph_clicked").setVideoID(d.props.videoID).log();if(d.state.renderFlyout!==null){d.$1||(d.props.onSupportFlyoutShow&&d.props.onSupportFlyoutShow(),d.setState({flyoutShown:!0}));return}d.setState(function(a){return{flyoutShown:!0}});var a=b("Bootloader").loadModules(["NativeSupportFlyout.react"],function(a){d.setState({renderFlyout:function(){return b("React").createElement(a,{onExit:d.$6,shown:d.state.flyoutShown,showNux:!1,targetID:d.props.targetID,targetName:d.props.targetName,videoID:d.props.videoID})}}),d.props.onSupportFlyoutShow&&d.props.onSupportFlyoutShow()},"UFINativeSupportButton.react");d.$4.addSubscriptions(a)},c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,b){return!a.showNux?babelHelpers["extends"]({},b,{showNux:a.showNux}):b};var d=c.prototype;d.componentDidMount=function(){var a=this;this.props.showNux&&b("gkx")("678291")&&b("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(b,c){b=b.hasUserSeenMessage(c.GAMES_NATIVE_SUPPORT_GLYPH);a.setState({showNux:!b})},"UFINativeSupportButton.react");this.$4=new(b("SubscriptionsHandler"))();this.$5=b("Arbiter").subscribe("page_transition",function(){return a.$6()})};d.componentWillUnmount=function(){this.$5&&this.$5.unsubscribe(),this.$4&&this.$4.release(),delete this.$4};d.render=function(){var a=this,c=h._("Send stars to {target_name}",[h._param("target_name",this.props.targetName)]);return b("React").createElement(b("FocusRelocator.react"),{from:this.$3,to:this.refs.icon},b("React").createElement(b("Link.react"),{"aria-label":c,className:"_r1a _1sj_ UFICommentSupportButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":c,linkRef:this.$7,onClick:this.$8,onMouseDown:this.$9,role:"button"},b("React").createElement("div",{ref:function(b){return a.$2=b},className:"_2wdv"}),this.$10(),this.$11()))};d.$10=function(){var a=this;return!this.state.showNux||!b("gkx")("678291")?null:b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFINativeSupportButton.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return a.$2},shown:this.state.showNux,position:"above",alignment:"right",onCloseButtonClick:this.$12},h._("New! Support your favorite streamers with Stars."))};d.$11=function(){var a=this;return b("React").createElement(b("XUIContextualDialog.react"),{alignment:"right",behaviors:{LayerTabIsolation:b("LayerTabIsolation")},className:"_3v1n",contextRef:function(){return a.$3},label:h._("Send Stars"),onBlur:this.$6,onToggle:function(b){!b&&a.state.flyoutShown&&a.$6()},position:"above",shown:this.state.flyoutShown,hasActionableContext:!0,width:i},this.state.renderFlyout==null||!this.state.flyoutShown?b("React").createElement("div",{className:"_xte"},b("React").createElement(b("XUISpinner.react"),{size:"large"})):this.state.renderFlyout())};return c}(b("React").Component);e.exports=a}),null);